---
import MainLayout from '../layouts/MainLayout.astro';
---

<MainLayout title="Get Started | Web Developer">
  <div class="workflow-container">
    <div id="step1" class="step active">
      <div class="step-header">
        <span class="step-tag">STEP 1</span>
        <h1>Choose Your Package</h1>
        <p>Select the website package that best fits your needs</p>
      </div>

      <div class="package-grid">
        <div class="package-card">
          <h2>Basic Website</h2>
          <p class="price">$1,800</p>
          <ul class="features">
            <li>5 Pages</li>
            <li>Responsive Design</li>
            <li>Contact Form</li>
            <li>Basic SEO</li>
          </ul>
          <button onclick="selectPkg('basic')" class="select-button">
            Choose Basic <span class="arrow">></span>
          </button>
        </div>

        <div class="package-card featured">
          <h2>Standard Website</h2>
          <p class="price">$3,500</p>
          <ul class="features">
            <li>Up to 10 Pages</li>
            <li>Custom Design</li>
            <li>Advanced Features</li>
            <li>SEO Optimization</li>
          </ul>
          <button onclick="selectPkg('standard')" class="select-button">
            Choose Standard <span class="arrow">></span>
          </button>
        </div>
      </div>
    </div>

    <div id="step2" class="step">
      <div class="step-header">
        <span class="step-tag">STEP 2</span>
        <h2>Page Details</h2>
        <p>Tell us about each page you need</p>
      </div>
      <div id="pageDetailsForm" class="page-form">
        <!-- Dynamically populated based on package selection -->
      </div>
      <div class="nav-buttons">
        <button onclick="prevStep()" class="back-button">Back</button>
        <button onclick="nextStep()" class="next-button">Continue <span class="arrow">></span></button>
      </div>
    </div>

    <div id="step3" class="step">
      <div class="step-header">
        <span class="step-tag">STEP 3</span>
        <h2>Timeline & Contact</h2>
        <p>When would you like your website completed?</p>
      </div>
      <div class="timeline-form">
        <select id="timeline" name="timeline" required>
          <option value="">Select Timeline</option>
          <option value="1month">Within 1 month</option>
          <option value="2months">1-2 months</option>
          <option value="3months">2-3 months</option>
          <option value="flexible">Flexible</option>
        </select>
        <input type="text" id="name" name="name" placeholder="Your Name" required>
        <input type="email" id="email" name="email" placeholder="Email Address" required>
        <input type="tel" id="phone" name="phone" placeholder="Phone Number">
      </div>
      <div class="nav-buttons">
        <button onclick="prevStep()" class="back-button">Back</button>
        <button onclick="nextStep()" class="next-button">Review <span class="arrow">></span></button>
      </div>
    </div>

    <div id="step4" class="step">
      <div class="step-header">
        <span class="step-tag">REVIEW</span>
        <h2>Review Your Selections</h2>
        <p>Confirm your website requirements</p>
      </div>
      <div id="reviewSummary" class="review-summary">
        <!-- Dynamically populated with selections -->
      </div>
      <form action="https://formspree.io/f/mjkvovpw" method="POST" id="finalForm">
        <input type="hidden" name="selectedPkg" id="selectedPkg">
        <input type="hidden" name="pagesDetails" id="pagesDetails">
        <input type="hidden" name="timeline" id="selectedTimeline">
        <input type="hidden" name="_next" value="https://yourdomain.com/thank-you">
        <div class="nav-buttons">
          <button type="button" onclick="prevStep()" class="back-button">Back</button>
          <button type="submit" class="submit-button">Submit Request <span class="arrow">></span></button>
        </div>
      </form>
    </div>
  </div>

  <script>
    let currentStep = 1;
    let selectedPkg = '';

    function selectPkg(pkgType: string) {
      selectedPkg = pkgType;
      const pkgInput = document.getElementById('selectedPkg') as HTMLInputElement;
      if (pkgInput) {
        pkgInput.value = pkgType;
      }
      nextStep();
    }

    function nextStep() {
      const currentElement = document.getElementById(`step${currentStep}`);
      const nextElement = document.getElementById(`step${currentStep + 1}`);
      
      if (currentElement && nextElement) {
        currentElement.classList.remove('active');
        currentStep++;
        nextElement.classList.add('active');
      }
    }

    function prevStep() {
      const currentElement = document.getElementById(`step${currentStep}`);
      const prevElement = document.getElementById(`step${currentStep - 1}`);
      
      if (currentElement && prevElement) {
        currentElement.classList.remove('active');
        currentStep--;
        prevElement.classList.add('active');
      }
    }

    // Form submission handling
    const form = document.getElementById('finalForm') as HTMLFormElement;
    if (form) {
      form.addEventListener('submit', function(e) {
        // Additional form processing here if needed
      });
    }
  </script>

  <style>
    /* Previous styles remain the same */
  </style>
</MainLayout>
